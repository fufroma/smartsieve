
required:
1. php-4.x
2. register_globals must be on (no longer true).
3. track vars on. should always be with php-4.x.
4. php must be compiled with imap support.
5. php-4.3.0 + openssl for socket ssl/tls support.
6. apache should be configured to check .htaccess files.
7. set session.save_path in php.ini to secure location.
8. PEAR with Crypt/HCEMD5.php.
9. cyrus-imap must be using sasl libraries (ie. for proxy authorization).
10. magic_quotes_runtime must be Off.

TODO:
- should 'keep' be an action rather than an option?
- fix stylesheet forbidden problem.
- call getMailboxName from retrieveMailboxList.
- write a getScriptLine function to do rtrim, stripslashes, etc.
- move functions to SmartSieve class: rule.php:checkRule(), 
  vacation.php:checkRule(), writeToLog(), getFormValue(), setUrl().
- call checkRule(),checkVacation() from updateScript().
- add file/line number to log messages.
- change to handle unixhierarchysep ('/' instead of '.' in fileinto).
- modify to check if script was written by SmartSieve. probably 
  need a config option as to disable saving or just warn user.
  - fix mode advanced bug while we're at it. warn about this too.
- cross site scripting: filter form data using htmlspecialchars and/or
  strip_tags().
- inner table width formatting on main.php.
- config options for other sieve rule options (forward, reject etc).
- improve sieve.lib:
    - do something with 'NO' responses, pehaps getError function.
    - implement havespace and deletescript functions.
    - add support for other sasl mechanisms.
    - add ssl socket support, either with the sieve starttls command, 
      or fsockopen('ssl://server....
    - undef $this->errstr.
    - return codes.
- vacation rule checkbox on main page.
- generic error function, to use when openSieveSession() fails.
- add $servers->imapflags value to conf/servers.php (?).


- support 'is' and 'matches' match types. will then support wildcard chars.
- issue HAVESPACE call before doing PUTSCRIPT as the spec suggests.
- modify to handle magic_quotes_runtime = On (?)
- add support for sasl proxy authentication. will need to do something 
  with imap_open() on rule.php, perhaps write function which will return 
  list of mboxes which the proxy user has write access to.
  note: this will allow admin access to users scripts.
- help info.
- perhaps allow access to different scripts. could have drop down list of 
  users scripts, allowing user to view each one.
  Should probably default to loading the currently active script, rather 
  than having a box on the login page.
- should have array of script object $scripts. would involve quite a bit 
  of work. eg. would have $scripts['scriptname']. We should probably 
  remove $sieve-scriptfile, and initialize the script object elsewhere.
- need to think about interface for managing existing scripts.
- sieve.lib: read() should put read chars into $this->read_buf or similar.
  then read() can return true or false, and set $this->socket_err if socket 
  timed out or no bytes found at the socket.
- internationalization ?


$Id$
